<div id="map" style="width:100%; height:100%; position:absolute; top:0;"></div>

<style type="text/css">
            
            #imgcontainer {
              position:relative;
              width: 100%;
              height: 100%;
              overflow: clip;
            }

            #img1 {
              position: absolute;
              top: 0px;
              left: 0px;
              transform-origin: 0 0;
              -webkit-transform-origin: 0 0;
              -moz-transform-origin: 0 0;
              -o-transform-origin: 0 0;
            }
            
            .corner {
              position: absolute;
              top: 0px; left: 0px;
            }
            
            #map{
            	border: 2px solid;
            }

</style>

<script>

		var map = new L.map('map').setView([51.505, -0.09], 13);

		L.tileLayer('https://{s}.tiles.mapbox.com/v3/anishshah101.ipm9j6em/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			id: 'examples.map-i86knfo3'
		}).addTo(map);

		
			var imageUrl = '/images/aerialimage.jpg';
			var imageBounds=[];
			var markers=[];
			corners = [100, 100, 300, 100, 100, 300, 300, 300];
			for(var i=0; i<8; i=i+2)
			{
				var a=map.layerPointToLatLng([corners[i],corners[i+1]]);
				var marker = new L.ImageMarker([a.lat, a.lng]).addTo(map);
				markers.push(marker);
				imageBounds.push([a.lat,a.lng]);
				var addidclass=marker._icon;
				addidclass.id= "marker"+i;
				addidclass.className = addidclass.className + " corner";
			}


			var newimg= new L.DistortableImage(imageUrl, imageBounds);
			(newimg.bringToFront()).addTo(map);
			
			
			
			var draggable = new L.Draggable(newimg._image);
			draggable.enable();
			
			draggable.on('drag', update);
			
			
			for (i in markers) {
                markers[i].on('drag', update);
            	}

</script>
